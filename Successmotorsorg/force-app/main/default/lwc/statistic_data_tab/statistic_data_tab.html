<template>
    <lightning-card title="Lightning Datatable Example">
        <div class="slds-m-around_medium">
            <lightning-input type="search" onchange={handleKeyChange} class="slds-m-bottom_small" label="Search"
                value={searchKey}></lightning-input>
                <lightning-accordion allow-multiple-sections-open={multiple}>
                    <template if:true={data}>
                        <template for:each={data} for:item="acc">
                            <lightning-accordion-section name={acc.Name} label={acc.Name} key={acc.Id}>
                                <lightning-card  title="Opportunities">
                                    <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                                        <thead>
                                            <tr class="slds-line-height_reset slds-text-title_caps">
                                                <th  class="slds-is-resizable" scope="col">
                                                    <div class="slds-truncate" title="Opportunity Name">
                                                        Opportunity Name
                                                    </div>
                                                </th>
                                                <th  class="slds-is-resizable" scope="col">
                                                    <div class="slds-truncate" title="Created Date">
                                                        Created Date
                                                    </div>
                                                </th>
                                                <th  class="slds-is-resizable" scope="col">
                                                    <div class="slds-truncate" title="Close Date">
                                                        Close Date
                                                    </div>
                                                </th>
                                                <th class="slds-is-resizable" scope="col">
                                                    <div class="slds-truncate" title="Amount">
                                                        Amount
                                                    </div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <template if:true={acc.Opportunities}>
                                                <template for:each={acc.Opportunities} for:item="opp">
                                                    <tr key={opp.Id}>
                                                        <th scope="row" data-label="Name">
                                                            <div class="slds-truncate" title={opp.Name}>{opp.Name}</div>
                                                        </th>
                                                        <th scope="row" data-label="Account Number">
                                                            <div class="slds-truncate" title={opp.CreatedDate}>{opp.CreatedDate}</div>
                                                        </th>
                                                        <th scope="row" data-label="Industry">
                                                            <div class="slds-truncate" title={opp.CloseDate}>{opp.CloseDate}</div>
                                                        </th>
                                                        <th scope="row" data-label="Phone">
                                                            <div class="slds-truncate" title={opp.Amount}>{opp.Amount}</div>
                                                        </th>
                                                        
                                                    </tr>
                                                    
                                                </template>
</template>
</tbody>
</table>
<lightning-button variant="brand" label="Show me Opportunity Product" title="Primary action" onclick={handleClick} class="slds-m-left_x-small"></lightning-button>
</lightning-card>
</lightning-accordion-section>
</template>
</template>
</lightning-accordion>
</br>
<lightning-layout horizontal-align="space">
    <lightning-layout-item flexibility="auto">
        <lightning-button label="Previous" icon-name="utility:chevronleft" onclick={previousHandler}>
        </lightning-button>
    </lightning-layout-item>
    <lightning-layout-item flexibility="auto">
        Page {page} of {totalPage}
    </lightning-layout-item>
    <lightning-layout-item flexibility="auto">
        <lightning-button label="Next" icon-name="utility:chevronright" icon-position="right" onclick={nextHandler}></lightning-button>
    </lightning-layout-item>
</lightning-layout>
</div>
</lightning-card>
</template>